<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: cgs_lda_vertex_program Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classcgs__lda__vertex__program-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">cgs_lda_vertex_program Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The collapsed Gibbs sampler vertex program updates the topic counts for the center vertex and then draws new topic assignments for each edge durring the scatter phase.  
 <a href="classcgs__lda__vertex__program.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for cgs_lda_vertex_program:</div>
<div class="dyncontent">
<div class="center"><img src="classcgs__lda__vertex__program__inherit__graph.png" border="0" usemap="#cgs__lda__vertex__program_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for cgs_lda_vertex_program:</div>
<div class="dyncontent">
<div class="center"><img src="classcgs__lda__vertex__program__coll__graph.png" border="0" usemap="#cgs__lda__vertex__program_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a94bb43516c1b5f8369b3c1320038f7ef"><td class="memItemLeft" align="right" valign="top"><a id="a94bb43516c1b5f8369b3c1320038f7ef"></a>
edge_dir_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a94bb43516c1b5f8369b3c1320038f7ef">gather_edges</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex) const</td></tr>
<tr class="memdesc:a94bb43516c1b5f8369b3c1320038f7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">gather on all edges <br /></td></tr>
<tr class="separator:a94bb43516c1b5f8369b3c1320038f7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafed65a1dda5dea7393cf6ab69ef5a18"><td class="memItemLeft" align="right" valign="top"><a id="aafed65a1dda5dea7393cf6ab69ef5a18"></a>
<a class="el" href="structgather__type.html">gather_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#aafed65a1dda5dea7393cf6ab69ef5a18">gather</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex, edge_type &amp;edge) const</td></tr>
<tr class="memdesc:aafed65a1dda5dea7393cf6ab69ef5a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect the current topic count on each edge. <br /></td></tr>
<tr class="separator:aafed65a1dda5dea7393cf6ab69ef5a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b6d4e36d47938193eb19cf25ab82fb"><td class="memItemLeft" align="right" valign="top"><a id="a87b6d4e36d47938193eb19cf25ab82fb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a87b6d4e36d47938193eb19cf25ab82fb">apply</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, vertex_type &amp;vertex, const <a class="el" href="structgather__type.html">gather_type</a> &amp;sum)</td></tr>
<tr class="memdesc:a87b6d4e36d47938193eb19cf25ab82fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the topic count for the center vertex. This ensures that the center vertex has the correct topic count before resampling the topics for each token along each edge. <br /></td></tr>
<tr class="separator:a87b6d4e36d47938193eb19cf25ab82fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb63805a422e946ad5ad8499014d328"><td class="memItemLeft" align="right" valign="top"><a id="a0cb63805a422e946ad5ad8499014d328"></a>
edge_dir_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a0cb63805a422e946ad5ad8499014d328">scatter_edges</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex) const</td></tr>
<tr class="memdesc:a0cb63805a422e946ad5ad8499014d328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scatter on all edges if the computation is on-going. Computation stops after bunrin or when disable sampling is set to true. <br /></td></tr>
<tr class="separator:a0cb63805a422e946ad5ad8499014d328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9967fef986fd7d155f027e5e86691655"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a9967fef986fd7d155f027e5e86691655">scatter</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex, edge_type &amp;edge) const</td></tr>
<tr class="memdesc:a9967fef986fd7d155f027e5e86691655"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw new topic assignments for each edge token.  <a href="#a9967fef986fd7d155f027e5e86691655">More...</a><br /></td></tr>
<tr class="separator:a9967fef986fd7d155f027e5e86691655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94bb43516c1b5f8369b3c1320038f7ef"><td class="memItemLeft" align="right" valign="top"><a id="a94bb43516c1b5f8369b3c1320038f7ef"></a>
edge_dir_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a94bb43516c1b5f8369b3c1320038f7ef">gather_edges</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex) const</td></tr>
<tr class="memdesc:a94bb43516c1b5f8369b3c1320038f7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">gather on all edges <br /></td></tr>
<tr class="separator:a94bb43516c1b5f8369b3c1320038f7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafed65a1dda5dea7393cf6ab69ef5a18"><td class="memItemLeft" align="right" valign="top"><a id="aafed65a1dda5dea7393cf6ab69ef5a18"></a>
<a class="el" href="structgather__type.html">gather_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#aafed65a1dda5dea7393cf6ab69ef5a18">gather</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex, edge_type &amp;edge) const</td></tr>
<tr class="memdesc:aafed65a1dda5dea7393cf6ab69ef5a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect the current topic count on each edge. <br /></td></tr>
<tr class="separator:aafed65a1dda5dea7393cf6ab69ef5a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b6d4e36d47938193eb19cf25ab82fb"><td class="memItemLeft" align="right" valign="top"><a id="a87b6d4e36d47938193eb19cf25ab82fb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a87b6d4e36d47938193eb19cf25ab82fb">apply</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, vertex_type &amp;vertex, const <a class="el" href="structgather__type.html">gather_type</a> &amp;sum)</td></tr>
<tr class="memdesc:a87b6d4e36d47938193eb19cf25ab82fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the topic count for the center vertex. This ensures that the center vertex has the correct topic count before resampling the topics for each token along each edge. <br /></td></tr>
<tr class="separator:a87b6d4e36d47938193eb19cf25ab82fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb63805a422e946ad5ad8499014d328"><td class="memItemLeft" align="right" valign="top"><a id="a0cb63805a422e946ad5ad8499014d328"></a>
edge_dir_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a0cb63805a422e946ad5ad8499014d328">scatter_edges</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex) const</td></tr>
<tr class="memdesc:a0cb63805a422e946ad5ad8499014d328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scatter on all edges if the computation is on-going. Computation stops after bunrin or when disable sampling is set to true. <br /></td></tr>
<tr class="separator:a0cb63805a422e946ad5ad8499014d328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9967fef986fd7d155f027e5e86691655"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#a9967fef986fd7d155f027e5e86691655">scatter</a> (<a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;context, const vertex_type &amp;vertex, edge_type &amp;edge) const</td></tr>
<tr class="memdesc:a9967fef986fd7d155f027e5e86691655"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw new topic assignments for each edge token.  <a href="#a9967fef986fd7d155f027e5e86691655">More...</a><br /></td></tr>
<tr class="separator:a9967fef986fd7d155f027e5e86691655"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ae64b2c501abfd2b0804021eb57ea8019"><td class="memItemLeft" align="right" valign="top"><a id="ae64b2c501abfd2b0804021eb57ea8019"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcgs__lda__vertex__program.html#ae64b2c501abfd2b0804021eb57ea8019">DISABLE_SAMPLING</a> = false</td></tr>
<tr class="memdesc:ae64b2c501abfd2b0804021eb57ea8019"><td class="mdescLeft">&#160;</td><td class="mdescRight">At termination we want to disable sampling to allow the correct final counts to be computed. <br /></td></tr>
<tr class="separator:ae64b2c501abfd2b0804021eb57ea8019"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The collapsed Gibbs sampler vertex program updates the topic counts for the center vertex and then draws new topic assignments for each edge durring the scatter phase. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9967fef986fd7d155f027e5e86691655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9967fef986fd7d155f027e5e86691655">&#9670;&nbsp;</a></span>scatter() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cgs_lda_vertex_program::scatter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vertex_type &amp;&#160;</td>
          <td class="paramname"><em>vertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">edge_type &amp;&#160;</td>
          <td class="paramname"><em>edge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Draw new topic assignments for each edge token. </p>
<p>Note that we exploit the GraphLab caching model here by DIRECTLY modifying the topic counts of adjacent vertices. Making the changes immediately visible to any adjacent vertex programs running on the same machine. However, these changes will be overwritten during the apply step and are only used to accelerate sampling. This is a potentially dangerous violation of the abstraction and should be taken with caution. In our case all vertex topic counts are preallocated and atomic operations are used. In addition during the sampling phase we must be careful to guard against potentially negative temporary counts. </p>

</div>
</div>
<a id="a9967fef986fd7d155f027e5e86691655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9967fef986fd7d155f027e5e86691655">&#9670;&nbsp;</a></span>scatter() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cgs_lda_vertex_program::scatter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cgs__lda_8cpp.html#a016cad045fa678bff0a04d795ef3899c">icontext_type</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vertex_type &amp;&#160;</td>
          <td class="paramname"><em>vertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">edge_type &amp;&#160;</td>
          <td class="paramname"><em>edge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Draw new topic assignments for each edge token. </p>
<p>Note that we exploit the GraphLab caching model here by DIRECTLY modifying the topic counts of adjacent vertices. Making the changes immediately visible to any adjacent vertex programs running on the same machine. However, these changes will be overwritten during the apply step and are only used to accelerate sampling. This is a potentially dangerous violation of the abstraction and should be taken with caution. In our case all vertex topic counts are preallocated and atomic operations are used. In addition during the sampling phase we must be careful to guard against potentially negative temporary counts. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="cgs__lda_8cpp.html">cgs_lda.cpp</a></li>
<li>cgs_lda_mimno_experimental.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
